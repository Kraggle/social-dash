import t from"../core/jquery/jquery.js";import a from"../plugins/chart-js/chart.js";import e from"./shared/chart-options.js";import s from"../plugins/K.js";import n from"./shared/map-data.js";import o from"../plugins/dayjs/index.js";import i from"./shared/shared.js";t((()=>{const d=t("[data-page]").data("page");n.init(),(()=>{let n=t("#performance-chart");if(!n.length)return;const l=n.get(0).getContext("2d"),c=[],r={day:{count:14,min:0,max:300},week:{count:14,min:0,max:2e3},month:{count:12,min:1e3,max:1e4}},h=n.closest(".card").find("[data-chart-toggles] input"),m=n.closest(".card").find("[data-chart-scale]");let u;h.each((function(){const a=t(this).data();a.options={color:a.color,label:a.label,btn:this,hidden:!t(this).is(":checked")},c.push(a.options)}));const p=(t="day")=>{u&&u.destroy();const n=[],i=[],d=r[t];s.each(c,((a,c)=>{let r,h=o().add(-d.count,t);const m=[];for(let a=0;a<d.count;a++)m.push({x:h.format("month"==t?"MMM 'YY":"DD/MM"),y:r=s.random(d.min,d.max)}),h=h.clone().add(1,t),i.push(r);n.push(s.extend({},e.lineDataset(c.color,l,!0),{hidden:c.hidden,label:c.label,data:m})),c.index=a}));let h={type:"line",data:{datasets:n},options:s.extend(!0,{},e.lineOptions(),{scales:{yAxes:{suggestedMin:Math.max(0,Math.min.apply(null,i)-10),suggestedMax:Math.max.apply(null,i)+10}},maintainAspectRatio:!0,aspectRatio:4})};u=new a(l,h)};p(m.find(":checked").val()),m.find("input").on("change",(()=>{const t=m.find(":checked");i.setPageCookie(d,{[t.attr("name")]:t.attr("id")}),p(t.val())})),h.on("change",(function(){const a=t(this).data("options"),e=a.hidden=!t(this).is(":checked");h.each((function(){i.setPageCookie(d,{[t(this).attr("id")]:t(this).is(":checked")})})),u[e?"hide":"show"](a.index)}))})();s.each([{id:"aua",value:7.45,last:7.98},{id:"engagement",value:17941,last:16042},{id:"followers",value:4598,last:3912},{id:"likes",value:14726,last:12861},{id:"comments",value:1892,last:1983},{id:"posts",value:12,last:10}],((a,e)=>{const n=t(`#num-${e.id}`),o=t(`#dir-${e.id}`),i=t(`#inc-${e.id}`),d=n.data("type");let l=i.data("value"),c=(e.value-e.last)/e.last*100,r=c>=0;n.text(`${"number"==d?"+":""}${s.noCommas(e.value)}${"percent"==d?"%":""}`),i.text(`${Math.round(Math.abs(c))}% ${l} ${r?"Increase":"Decrease"}`),o[(r?"add":"remove")+"Class"]("fa-arrow-up")[(r?"remove":"add")+"Class"]("fa-arrow-down")}))}));