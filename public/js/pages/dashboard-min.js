import a from"../core/jquery/jquery.js";import t from"../plugins/chart-js/chart.js";import e from"./shared/chart-options.js";import s from"../plugins/K.js";import o from"./shared/map-data.js";import n from"../plugins/dayjs/index.js";a((()=>{o.init(),(()=>{let o=a("#performance-chart");if(o.length){const i=o.get(0).getContext("2d"),d=[],l=o.closest(".card").find("[data-chart-toggles] input");o.closest(".card").find("[data-chart-scale] input");l.each((function(){const t=a(this).data();t.options={color:t.color,label:t.label,btn:this,hidden:!a(this).is(":checked")},d.push(t.options)}));const r=[],c=[],h=14,p=0,u=300;s.each(d,((a,t)=>{let o,d=n().add(-h,"day");const l=[];for(let a=0;a<h;a++)l.push({x:d.format("DD/MM"),y:o=s.random(p,u)}),d=d.clone().add(1,"day"),c.push(o);r.push(s.extend({},e.lineDataset(t.color,i,!0),{hidden:t.hidden,label:t.label,data:l})),t.index=a}));let m={type:"line",data:{datasets:r},options:s.extend(!0,{},e.lineOptions(),{scales:{yAxes:{suggestedMin:Math.max(0,Math.min.apply(null,c)-10),suggestedMax:Math.max.apply(null,c)+10}},maintainAspectRatio:!0,aspectRatio:4})};const f=new t(i,m);o.data("chart",f),l.on("change",(function(){const t=a(this).data("options");f[a(this).is(":checked")?"show":"hide"](t.index)}))}})();s.each([{id:"aua",value:7.45,last:7.98},{id:"engagement",value:17941,last:16042},{id:"followers",value:4598,last:3912},{id:"likes",value:14726,last:12861},{id:"comments",value:1892,last:1983},{id:"posts",value:12,last:10}],((t,e)=>{const o=a(`#num-${e.id}`),n=a(`#dir-${e.id}`),i=a(`#inc-${e.id}`),d=o.data("type");let l=i.data("value"),r=(e.value-e.last)/e.last*100,c=r>=0;o.text(`${"number"==d?"+":""}${s.noCommas(e.value)}${"percent"==d?"%":""}`),i.text(`${Math.round(Math.abs(r))}% ${l} ${c?"Increase":"Decrease"}`),n[(c?"add":"remove")+"Class"]("fa-arrow-up")[(c?"remove":"add")+"Class"]("fa-arrow-down")}))}));