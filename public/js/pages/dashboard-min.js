import a from"../core/jquery/jquery.js";import t from"../plugins/chart-js/chart.js";import e from"./shared/chart-options.js";import n from"../plugins/K.js";import s from"./shared/map-data.js";import o from"../plugins/dayjs/index.js";a((()=>{s.init(),(()=>{let s=a("#performance-chart");if(!s.length)return;const i=s.get(0).getContext("2d"),d=[],l={day:{count:14,min:0,max:300},week:{count:14,min:0,max:2e3},month:{count:12,min:1e3,max:1e4}},c=s.closest(".card").find("[data-chart-toggles] input"),r=s.closest(".card").find("[data-chart-scale]");let h;c.each((function(){const t=a(this).data();t.options={color:t.color,label:t.label,btn:this,hidden:!a(this).is(":checked")},d.push(t.options)}));const m=(a="day")=>{h&&h.destroy();const s=[],c=[],r=l[a];n.each(d,((t,d)=>{let l,h=o().add(-r.count,a);const m=[];for(let t=0;t<r.count;t++)m.push({x:h.format("month"==a?"MMM 'YY":"DD/MM"),y:l=n.random(r.min,r.max)}),h=h.clone().add(1,a),c.push(l);s.push(n.extend({},e.lineDataset(d.color,i,!0),{hidden:d.hidden,label:d.label,data:m})),d.index=t}));let m={type:"line",data:{datasets:s},options:n.extend(!0,{},e.lineOptions(),{scales:{yAxes:{suggestedMin:Math.max(0,Math.min.apply(null,c)-10),suggestedMax:Math.max.apply(null,c)+10}},maintainAspectRatio:!0,aspectRatio:4})};h=new t(i,m)};m(r.find(":checked").val()),r.find("input").on("change",(()=>{m(r.find(":checked").val())})),c.on("change",(function(){const t=a(this).data("options"),e=t.hidden=!a(this).is(":checked");h[e?"hide":"show"](t.index)}))})();n.each([{id:"aua",value:7.45,last:7.98},{id:"engagement",value:17941,last:16042},{id:"followers",value:4598,last:3912},{id:"likes",value:14726,last:12861},{id:"comments",value:1892,last:1983},{id:"posts",value:12,last:10}],((t,e)=>{const s=a(`#num-${e.id}`),o=a(`#dir-${e.id}`),i=a(`#inc-${e.id}`),d=s.data("type");let l=i.data("value"),c=(e.value-e.last)/e.last*100,r=c>=0;s.text(`${"number"==d?"+":""}${n.noCommas(e.value)}${"percent"==d?"%":""}`),i.text(`${Math.round(Math.abs(c))}% ${l} ${r?"Increase":"Decrease"}`),o[(r?"add":"remove")+"Class"]("fa-arrow-up")[(r?"remove":"add")+"Class"]("fa-arrow-down")}))}));