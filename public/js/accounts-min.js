import{K as t}from"./src/K.js";import e from"./shared.js";import s from"./libs/wNumb-min.js";$((()=>{$("#search").on("keypress",(function(t){"Enter"==t.key&&(t.preventDefault(),i())})),$("#find-btn").on("click",(function(t){t.preventDefault(),i()})),$("button[toggle]").on("click",e.toggleHelp),$("[has-cost]").on("change switchChange.bootstrapSwitch",(function(t){const e=$(this).attr("name").replace(/(^s\w+\[|\])/g,""),s=$(this).data(),a=$(this).attr("type");let i=0,c="";"checkbox"==a?(i=s[$(this).is(":checked")?"onCost":"offCost"],c=$(this).is(":checked")?"on":"off"):a||(i=$(":selected",this).data("cost"),c=$(this).val()),$(`#${e}_cost`).text(i),n.call(this,c),o()})),$("div[id^=noUi_]:not(.initialized)").each((function(){$(this).addClass("initialized");const t=$(this).attr("name"),e=t.replace(/(^s\w+\[|\])/g,""),a=$(this).get(0),i=$(`input[name="${t}"]`),c=$(this).data(),r=c.min,l=c.max,h=c.step,d=c.default;function m(){const t=i.data(),s=t.maxCost,n=t.minCost,o=(parseInt(a.noUiSlider.get())-r)/(l-r),c=Math.round((s-n)*o+n);$(`#${e}_cost`).text(c)}i.data(c),i.attr("has-cost",""),noUiSlider.create(a,{start:d,connect:[!0,!0],range:{min:r,max:l},step:h,format:s({decimals:0})}),a.noUiSlider.on("update",(()=>{const t=a.noUiSlider.get();i.val(t),m.call(this),n.call(this,t),o()})),i.on("change",(function(){const t=$(this).val();a.noUiSlider.set(t),m.call(this),n.call(this,t),o()}))})),a()}));const a=()=>{const t=parseInt($("[name=followers]").val()),s=Math.ceil(t/5e4);$("[has-cost]").each((function(){let t=$(this).data();switch($(this).attr("type")){case"checkbox":break;case"number":null==t.oldMax&&(t.oldMax=t.maxCost),null==t.oldMin&&(t.oldMin=t.minCost),t.maxCost=t.oldMax*s,t.minCost=t.oldMin*s,$(this).trigger("change");break;case"hidden":break;case void 0:$("option",this).each((function(){t=$(this).data(),t.oldCost||(t.oldCost=t.cost),t.cost=Math.round(t.oldCost*s),t.content=t.content.replace(/cost'>£[\d\.]+/,`cost'>£${t.cost}`)})),$(this).selectpicker("refresh"),$(this).trigger("change");break}})),$("[update=followers]").text(e.nFormatter(t,t>1e6?1:0)),o()};function n(t){if(!this.hasAttribute("has-msg"))return;$(this).attr("name");$(`[update="${$(this).attr("name")}"]`).text(t.toLowerCase())}const o=()=>{let t=0;$("[has-cost]").each((function(){const e=$(this).data(),s="#"+$(this).attr("name").replace(/(^s\w+\[|\])/g,"")+"_cost";"hidden"==$(this).attr("type")?t+=e.cost:t+=parseInt($(s).text())})),$(".acc-cost").text(t)},i=()=>{const s=$("#search").val();s?$.getJSON("/calls",{action:"igAccountExists",name:s},(function(s){if(e.alert(s.message,s.success?"normal":"error"),s.success){$("input[name=username]").val(s.username),$("input[name=pk]").val(s.pk);let e=s.data.follower_count;e=t.isArray(e)?e.pop():e,$("[name=followers]").val(e),a()}})):e.alert("Please input an instergram username!","error")};