import{swalClasses as e}from"../../classes.js";import{warn as t,error as n,isPromise as u}from"../../utils.js";import*as i from"../index.js";import o from"../../../privateProps.js";const r=["input","file","range","select","radio","checkbox","textarea"];export const renderInput=(t,n)=>{const u=i.getPopup(),a=o.innerParams.get(t),c=!a||n.input!==a.input;r.forEach((t=>{const o=e[t],r=i.getChildByClass(u,o);p(t,n.inputAttributes),r.className=o,c&&i.hide(r)})),n.input&&(c&&l(n),s(n))};const l=e=>{if(!m[e.input])return n(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${e.input}"`);const t=d(e.input),u=m[e.input](t,e);i.show(u),setTimeout((()=>{i.focusInput(u)}))},p=(e,t)=>{const n=i.getInput(i.getPopup(),e);if(n){(e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["type","value","style"].includes(n)||e.removeAttribute(n)}})(n);for(const e in t)n.setAttribute(e,t[e])}},s=e=>{const t=d(e.input);e.customClass&&i.addClass(t,e.customClass.input)},a=(e,t)=>{e.placeholder&&!t.inputPlaceholder||(e.placeholder=t.inputPlaceholder)},c=(t,n,u)=>{if(u.inputLabel){t.id=e.input;const o=document.createElement("label"),r=e["input-label"];o.setAttribute("for",t.id),o.className=r,i.addClass(o,u.customClass.inputLabel),o.innerText=u.inputLabel,n.insertAdjacentElement("beforebegin",o)}},d=t=>{const n=e[t]?e[t]:e.input;return i.getChildByClass(i.getPopup(),n)},m={};m.text=m.email=m.password=m.number=m.tel=m.url=(e,n)=>("string"==typeof n.inputValue||"number"==typeof n.inputValue?e.value=n.inputValue:u(n.inputValue)||t(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof n.inputValue}"`),c(e,e,n),a(e,n),e.type=n.input,e),m.file=(e,t)=>(c(e,e,t),a(e,t),e),m.range=(e,t)=>{const n=e.querySelector("input"),u=e.querySelector("output");return n.value=t.inputValue,n.type=t.input,u.value=t.inputValue,c(n,e,t),e},m.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");i.setInnerHtml(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return c(e,e,t),e},m.radio=e=>(e.textContent="",e),m.checkbox=(t,n)=>{const u=i.getInput(i.getPopup(),"checkbox");u.value=1,u.id=e.checkbox,u.checked=Boolean(n.inputValue);const o=t.querySelector("span");return i.setInnerHtml(o,n.inputPlaceholder),t},m.textarea=(e,t)=>{e.value=t.inputValue,a(e,t),c(e,e,t);if("MutationObserver"in window){const t=parseInt(window.getComputedStyle(i.getPopup()).width);new MutationObserver((()=>{const n=e.offsetWidth+(u=e,parseInt(window.getComputedStyle(u).marginLeft)+parseInt(window.getComputedStyle(u).marginRight));var u;i.getPopup().style.width=n>t?`${n}px`:null})).observe(e,{attributes:!0,attributeFilter:["style"]})}return e};