.btn-group {
    &.rounded-pill {
        > .btn {
            border-radius: $border-radius-pill;
        }

        // Prevent double borders when buttons are next to each other
        > .btn:not(:first-child),
        > .btn-group:not(:first-child) {
            margin-left: -$btn-border-width;
        }

        // Reset rounded corners
        > .btn:not(:last-child):not(.dropdown-toggle),
        > .btn-group:not(:last-child) > .btn {
            @include border-end-radius(0);
        }

        // The left radius should be 0 if the button is:
        // - the "third or more" child
        // - the second child and the previous element isn't `.btn-check` (making it the first child visually)
        // - part of a btn-group which isn't the first child
        > .btn:nth-child(n + 3),
        > :not(.btn-check) + .btn,
        > .btn-group:not(:first-child) > .btn {
            @include border-start-radius(0);
        }
    }
}
